<h1>Chamar APIs de machine learning</h1>
<h2>Visão geral</h2>
<p>Neste laboratório, você usará as APIs de machine learning no Datalab.</p>
<h3><strong>Conteúdo do laboratório</strong></h3>
<p>Neste laboratório, você aprenderá a chamar as APIs de machine learning do Python e a usar os resultados delas.</p>
<h2>Introdução</h2>
<p>Neste laboratório, você chamará as seguintes APIs de machine learning do Datalab para executar algumas tarefas representativas:</p>
<ul>
<li>
<p>a API Vision para detectar texto em uma imagem</p>
</li>
<li>
<p>a API Translate para traduzir o texto detectado para o inglês</p>
</li>
<li>
<p>a API Natural Language para detectar o sentimento por trás de citações famosas</p>
</li>
<li>
<p>a API Speech para transcrever um arquivo de áudio</p>
</li>
</ul>
<h2>Configurar</h2>
<fragment path="/fragments/cloudshell"></fragment>
<h2>Tarefa 1: inicie o Cloud Datalab</h2>
<p>Para iniciar o Cloud Datalab, faça o seguinte:</p>
<ol>
<li>
<p>No Cloud Shell, digite o código:</p>
</li>
</ol>
<pre><code class="language-bash">datalab create bdmlvm --zone us-central1-a
</code></pre>
<p>O Datalab levará cerca de cinco minutos para inicializar.</p>
<p><code>Observação: siga as instruções na tela durante esse processo.</code></p>
<h2>Tarefa 2: insira um bloco de dados no Cloud Datalab</h2>
<p>Se necessário, espere até que o Datalab inicialize. A ferramenta estará pronta quando aparecer a mensagem "Web Preview".</p>
<ol>
<li>
<p>Clique no ícone <strong>Visualização da Web</strong> no canto superior direito da barra de opções do Cloud Shell. Clique em <strong>Alterar porta</strong>. Alterne para a porta <strong>8081</strong> na caixa de diálogo <strong>Alterar porta de visualização</strong>. Em seguida, clique em <strong>Alterar e Visualizar.</strong>.</p>
<p><img src="img/ChangePort.png" alt="ChangePort.png"></p>
<p><img src="img/ChangePreviewPort.png" alt="ChangePreviewPort.png"></p>
<p>Observação: a conexão com sua instância do Datalab continuará aberta enquanto o comando estiver ativo. Se o Cloud Shell usado para executar o comando datalab for fechado ou interrompido, a conexão com sua máquina virtual do Cloud Datalab será encerrada. Caso isso aconteça, use o comando <code>datalab connect bdmlvm</code> no seu novo Cloud Shell.</p>
</li>
<li>
<p>No <strong>Datalab</strong>, clique no ícone <strong>Open ungit</strong> na barra lateral do canto superior direito.</p>
<p><img src="img/fc5c4f63c40f83f.png" alt="fc5c4f63c40f83f.png"></p>
</li>
<li>
<p>Na janela do Ungit, selecione o texto <strong>/content/datalab/notebooks</strong> e remova <strong>notebooks</strong> para que fique apenas <strong>/content/datalab</strong>. Em seguida, pressione <strong>Enter</strong>.</p>
<p><img src="img/dbeb32393b0874e4.png" alt="dbeb32393b0874e4.png"></p>
</li>
<li>
<p>No painel exibido, digite o seguinte endereço como o repositório do GitHub em <strong>Clone from</strong>:</p>
<pre><code class="language-bash">https://github.com/GoogleCloudPlatform/training-data-analyst
</code></pre>
</li>
<li>
<p>Clique em <strong>Clone repository</strong>.</p>
</li>
</ol>
<h2>Tarefa 3: obtenha uma chave de API</h2>
<p>Para obter uma chave de API:</p>
<ol>
<li>
<p>No Console do GCP, acesse o <strong>menu de navegação</strong> (<img alt="8ab244f9cffa6198.png" src="img/mainmenu.png">), clique em <strong>APIs e serviços</strong> e selecione <strong>Painel</strong>.</p>
</li>
<li>
<p>Na caixa de pesquisa, digite <strong>vision</strong> para encontrar a <strong>Cloud Vision API</strong> publicada pelo Google e clique no hiperlink.</p>
</li>
<li>
<p>Clique em <strong>Ativada</strong>, se necessário.</p>
</li>
<li>
<p>Siga o mesmo processo para ativar a <strong>Cloud Translation API</strong>, <strong>Cloud Speech API</strong> e <strong>Cloud Natural Language API</strong>, todas publicadas pelo Google.</p>
</li>
<li>
<p>No menu do Console do GCP, selecione <strong>APIs e serviços</strong> e clique em <strong>Credenciais</strong>.</p>
</li>
<li>
<p>Se você ainda não tiver uma chave de API, clique no botão <strong>Criar credenciais</strong> e selecione <strong>Chave de API</strong>. Depois da criação, copie a chave de API e clique em <strong>Fechar</strong>. Você precisará dessa chave de API no bloco de dados mais tarde.</p>
</li>
</ol>
<h2>Tarefa 4: chame APIs de ML do Datalab</h2>
<ol>
<li>
<p>Volte para o navegador do Datalab e acesse <strong>training-data-analyst &gt; CPB100 &gt; lab4c &gt; mlapis.ipynb</strong></p>
</li>
<li>
<p>Leia o comentário, clique em <strong>Clear | Clear all Cells</strong> e execute os snippets do Python na célula. Pressione <strong>Shift+Enter</strong> para executar cada trecho do código. Não se esqueça de inserir a chave de API na primeira célula do Python.</p>
</li>
</ol>
<fragment path="/fragments/endqwiklab"></fragment>
<h5>Manual atualizado em 10 de Outubro de 2018</h5>
<h5>Laboratório testado em 10 de Outubro de 2018</h5>
<fragment path="/fragments/copyright"></fragment>
